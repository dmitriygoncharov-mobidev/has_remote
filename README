= HasRemote

Gives your local ActiveRecord model a remote proxy (ActiveResource),
which enables you to look for certain attributes remotely.

Before usage, make sure your model's table has an integer column called <tt>remote_id</tt>.
(This name can be overridden, see options.)

=== Installation

 script/plugins install git://github.com/innovationfactory/has_remote.git

 script/generate has_remote_migration

 rake db:migrate

=== Usage

See documentation for HasRemote::ClassMethods#has_remote.

=== Examples

 class User < ActiveRecord::Base
   has_remote :site => 'http://people.local'
 end

 User.find(1).remote
 # => #<User::Remote> (inherits from ActiveResource::Base)
 
 User.find(1).remote.username
 # => "User name from remote server"

<tt>has_remote</tt> also takes a block which can be used to specify remote attributes:

 class User < ActiveRecord::Base
   has_remote :site => '...' do |remote|
     remote.attribute :username
   end 
 end

 User.find(1).username
 # => "User name from remote server"

If you don't need to instantiate a local record, calling the remote class directly is possible too:

 User::Remote.find(1)

Note that the User::Remote class only exists if User is set up to have a remote and has been loaded.

The <tt>:through</tt> option enables you to specify your own ActiveResource class:

 class RemoteUser < ActiveResource::Base
   self.site = "people.local"
   self.element_name = "person"
 end

 class User < ActiveRecord::Base
   has_remote :through => "RemoteUser"
 end

=== Caching attributes locally

In case you need to do database operations on remote attributes, like sorting, you can tell has_remote
to locally cache specific attributes in the following manner:

 class User < ActiveRecord::Base
   has_remote :site => '...' do |remote|
     remote.attribute :username, :local_cache => true
   end
 end

This assumes you have a 'username' column in the 'users' table.

Cached attributes will be updated every time the record is saved. Also there are two other
ways of keeping the locally cached attributes in sync with their remote values.

1. Manual synchronization
2. Rake task hr:sync

==== Manual synchronization

See HasRemote::Cache for more information on the available methods for triggering synchronization manually.

==== Rake hr:sync

The rake task 'hr:sync' is provided to allow easy synchronization from the command line.
You could set up a cron tab that runs this task regularly to keep the data in sync.

By default hr:sync updates all records of each model that has remotes. You can limit this to
certain models by using the MODELS parameter:

 rake hr:sync MODELS=Contact,Company

=== Documentation

To generate RDocs for this plugin, run:
 rake doc:plugins:has_remote 

=== Testing

To run the specs for the plugin, run:
 script/spec -cfs vendor/plugins/has_remote/spec/

(This assumes you have RSpec installed.)

=== More information & patches

Questions, requests and patches can be directed to sjoerd.andringa@innovationfactory.nl.


Copyright (c) 2009 Innovation Factory.